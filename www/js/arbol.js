var preguntas = new Array();
preguntas[0]="Cual es el nodo raiz?";
preguntas[1]="Cuales son los nodos hoja?";
preguntas[2]="Cual es el camino mas corto para llegar a C ?";
preguntas[3]="Cual es el camino mas corto para llegar a E?";
preguntas[4]="Cual es el padre de D?";
preguntas[5]="Que nodos estan en el nivel 0?";
preguntas[6]="Que nodos estan en el nivel 1?";
preguntas[7]="Que nodos estan en el nivel 2?";
preguntas[8]="Cual el el padre de A?";
preguntas[9]="Cuales son los hijos de A?";
preguntas[10]="Cuales son los hijos de B?";
preguntas[11]="Cuales son los hijos de E?";
preguntas[12]="Que nodo es el padre de A?";
preguntas[13]="Que nodo es el padre de B?";
preguntas[14]="Que nodo es el padre de F?";
preguntas[15]="Que nodos son hermanos de F?";
preguntas[16]="Que nodos son hermanos de A?";
preguntas[17]="Que nodos son hermanos de C?";
preguntas[18]="Que nodos son hermanos de F?";
preguntas[19]="Que nodos son hermanos de D?";




preguntas [20]="Cual es el nodo raiz?";
preguntas [21]="Cuales son los nodos hoja0?";
preguntas [22]="Cual es el camino mas corto para llegar a E?";
preguntas [23]="Cual es el camino mas corto para llegar a M?";
preguntas [24]="Cual es el camino mas corto para llegar a D?";
preguntas [25]="Cual es el camino mas corto para llegar a Ñ?";
preguntas [26]="Que nodos estan en el nivel 0?";
preguntas [27]="Que nodos estan en el nivel 1?";
preguntas [28]="Que nodos estan en el nivel 2?";
preguntas [29]="Que nodos estan en el nivel 3?";
preguntas [30]="Cual el el padre de A?";
preguntas [31]="Cual el el padre de B?";
preguntas [32]="Cual el el padre de K?";
preguntas [33]="Cual el el padre de H?";
preguntas [34]="Cual el el padre de G?";
preguntas [35]="Cuales son los hijos de A?";
preguntas [36]="Cuales son los hijos de G?";
preguntas [37]="Cuales son los hijos de D?";
preguntas [38]="Cuales son los hijos de I?";
preguntas [39]="Cuales son los hijos de F?";
preguntas [40]="Cuales son los hijos de K?";
preguntas [41]="Que nodos son ancestros de A?";
preguntas [42]="Que nodos son ancestros de K?";
preguntas [43]="Que nodos son ancestros de G?";
preguntas [44]="Que nodos son ancestros de M?";
preguntas [45]="Que nodos son ancestros de I?";
preguntas [46]="Que nodos son ancestros de Ñ?";
preguntas [47]="Que nodos son hermanos de A?";
preguntas [48]="Que nodos son hermanos de G?";
preguntas [49]="Que nodos son hermanos de M?";
preguntas [50]="Que nodos son hermanos de G?";
preguntas [51]="Que nodos son hermanos de E?";
preguntas [52]="Que nodos son hermanos de F?";


preguntas[53]="Cual es el nodo raiz?";
preguntas[54]="Cuales son los nodos hoja?";
preguntas[55]="Cual es el camino mas corto para llegar a F?";
preguntas[56]="Cual es el camino mas corto para llegar a P?";
preguntas[57]="Cual es el camino mas corto para llegar a H?";
preguntas[58]="Cual es el camino mas corto para llegar a I?";
preguntas[59]="Cual es el camino mas corto para llegar a M?";
preguntas[60]="Que nodo es el padre de A?";
preguntas[61]="Que nodo es el padre de B?";
preguntas[62]="Que nodo es el padre de I?";
preguntas[63]="Que nodo es el padre de P?";
preguntas[64]="Que nodo es el padre de G?";
preguntas[65]="Que nodos estan en el nivel 0?";
preguntas[66]="Que nodos estan en el nivel 1?";
preguntas[67]="Que nodos estan en el nivel 2?";
preguntas[68]="Que nodos estan en el nivel 3?";
preguntas[69]="Que nodos estan en el nivel 4?";
preguntas[70]="Que nodos son hijos de A?";
preguntas[71]="Que nodos son hijos de I";
preguntas[72]="Que nodos son hijos de K?";
preguntas[73]="Que nodos son hijos de H?";
preguntas[74]="Que nodos son hijos de N?";
preguntas[75]="Que nodos son hijos de G?";
preguntas[76]="Que nodos son ancestros de A?";
preguntas[77]="Que nodos son ancestros de F?";
preguntas[78]="Que nodos son ancestros de K?";
preguntas[79]="Que nodos son ancestros de M?";
preguntas[80]="Que nodos son ancestros de N?";
preguntas[81]="Que nodos son ancestros de p?";
preguntas[82]="Que nodos son ancestros de B?";
preguntas[83]="Que nodos son hermanos de A?"; 
preguntas[84]="Que nodos son hermanos de E?"; 
preguntas[85]="Que nodos son hermanos de C?"; 
preguntas[86]="Que nodos son hermanos de I?"; 
preguntas[87]="Que nodos son hermanos de F?"; 
preguntas[88]="Que nodos son hermanos de H?"; 
preguntas[89]="Que nodos son hermanos de N?"; 
preguntas[90]="Que nodos son hermanos de Q?"; 



var respuestas=new Array();
respuestas[0]="A";
respuestas[1]="DEF";
respuestas[2]="AC";
respuestas[3]="ABE";
respuestas[4]="B";
respuestas[5]="A";
respuestas[6]="BC";
respuestas[7]="DEF";
respuestas[8]="";
respuestas[9]="BC";
respuestas[10]="DE";
respuestas[11]="";
respuestas[12]="";
respuestas[13]="A";
respuestas[14]="C";
respuestas[15]="";
respuestas[16]="";
respuestas[17]="B";
respuestas[18]="";
respuestas[19]="E";

respuestas[20]="A";
respuestas[21]="KLMNÑ";
respuestas[22]="ABE";
respuestas[23]="ADHM";
respuestas[24]="AD";
respuestas[25]="ADJÑ";
respuestas[26]="A";
respuestas[27]="BCD";
respuestas[28]="EFGHIJ";
respuestas[29]="KLMNÑ";
respuestas[30]="";
respuestas[31]="A";
respuestas[32]="F";
respuestas[33]="D";
respuestas[34]="C";
respuestas[35]="BCD";
respuestas[36]="";
respuestas[37]="HIJ";
respuestas[38]="";
respuestas[39]="KL";
respuestas[40]="";
respuestas[41]="";
respuestas[42]="ABF";
respuestas[43]="AC";
respuestas[44]="ADH";
respuestas[45]="AD";
respuestas[46]="ADJ";
respuestas[47]="";
respuestas[48]="";
respuestas[49]="N";
respuestas[50]="";
respuestas[51]="F";
respuestas[52]="E";


respuestas[53]="A";
respuestas[54]="HLMPQ";
respuestas[55]="ABF";
respuestas[56]="AENP";
respuestas[57]="ABFGH";
respuestas[58]="ACI";
respuestas[59]="ACJKM";
respuestas[60]="";
respuestas[61]="A";
respuestas[62]="C";
respuestas[63]="N";
respuestas[64]="F";
respuestas[65]="A";
respuestas[66]="BCDE";
respuestas[67]="FIJN";
respuestas[68]="GKPQ";
respuestas[69]="HLM";
respuestas[70]="BCDE";
respuestas[71]="";
respuestas[72]="LM";
respuestas[73]="";
respuestas[74]="PQ";
respuestas[75]="H";
respuestas[76]="";
respuestas[77]="AB";
respuestas[78]="ACJ";
respuestas[79]="ACJK";
respuestas[80]="AE";
respuestas[81]="AEN";
respuestas[82]="A";
respuestas[83]="";
respuestas[84]="BCD";
respuestas[85]="BDE";
respuestas[86]="J";
respuestas[87]="";
respuestas[88]="";
respuestas[89]="";
respuestas[91]="P";



var nivel=1;
var numRespuetas;
var numAciertos;
var numErrores;
var resp="";
var puntos=0;
var randomElement=Math.floor(Math.random()*20)+30;
var tiempoTotal=0;

var CronoID = null
var CronoEjecutandose = false
var decimas, segundos, minutos

const limitNivel1=20;
const limitNivel2=53;
const limitNivel3=91;
const numPreguntas1=20;
const numPreguntas2=33;
const numPreguntas3=39;
	

function start(){
	document.getElementById("startButtonDiv").style.zIndex="-1";
	document.getElementById('startButtonDiv').style.visibility = "hidden";
	document.getElementById('arbolDiv').style.visibility = "visible";
	if (nivel==1){
		document.getElementById("arbol").src="css/images/arbol1.png";
	}
	if (nivel==2){
		document.getElementById("arbol").src="css/images/arbol2.png"
	}
	if (nivel==3){
		document.getElementById("arbol").src="css/images/arbol3.jpg"
	}
	if(nivel==4){
		if (tiempoTotal<50){
			document.getElementById('point').src="./image/PantallaNivelMuyAlto.png";
		}
		if ((tiempoTotal>=50)&&(tiempoTotal<100)){
			document.getElementById('point').src="./image/PantallaNivelAlto.png";
			
		}
		if ((tiempoTotal>=100)&&(tiempoTotal<150)){
			document.getElementById('point').src="./image/PantallaNivelMedio.png";
		}
		if ((tiempoTotal>=150)&&(tiempoTotal<200)){
			document.getElementById('point').src="./image/PantallaNivelBajo.png";
		}
		if ((tiempoTotal>=200)){
			document.getElementById('point').src="./image/PantallaNivelMuyBajo.png";
		}
		localStorage.setItem('juegoArbol',tiempoTotal);
		document.getElementById('pointDiv').style.visibility = "visible";
		document.getElementById('pointDiv').style.display = "";
		document.getElementById('comprobar').style.display = "none";
		document.getElementById('tiempo').style.display = "none";
		document.getElementById('respuesta').style.display = "none";
		document.getElementById('cadenaDiv').style.display = "none";
		document.getElementById('botonera').style.display = "none";
		document.getElementById('arbolDiv').style.display = "none";
		document.getElementById('preguntas').style.display = "none";
		
		
		setTimeout("location.href='./index.html'", 5000);
	}
	numRespuestas=0;
	numAciertos=0;
	numErrores=0;
	document.getElementById('aciertos').innerHTML = "ACIERTOS: "+numAciertos;
	document.getElementById('errores').innerHTML = "ERRORES: "+numErrores;
	document.getElementById('comprobar').style.visibility="visible";
	document.getElementById('tiempo').style.visibility="visible";
	document.getElementById('respuesta').style.visibility="visible";
	document.getElementById('startButton').style.visibility="hidden";
	document.getElementById('cadenaDiv').style.visibility="visible";
	
	cambiarSubtitulos();
	visualizarBotones();
	
	IniciarCrono();
}


function cambiarSubtitulos(anterior){
	
	switch (nivel){
		case 1:
			randomElement=Math.floor(Math.random()*numPreguntas1);
			break;
		case 2:
			randomElement=Math.floor(Math.random()*numPreguntas2)+limitNivel1;
			break;
		case 3:
			randomElement=Math.floor(Math.random()*numPreguntas3)+limitNivel2;
			break;
	}
	if (randomElement==anterior){
		randomElement++;
	}
	document.getElementById('subtitulos').innerHTML = "&iquest;" + preguntas[randomElement];
}

function verificarRespuesta(){
	numRespuestas++;
	if(resp==respuestas[randomElement]){
		numAciertos++;
		document.getElementById('aciertos').innerHTML = "ACIERTOS: "+numAciertos;
	}else{
		numErrores++;
		document.getElementById('errores').innerHTML = "ERRORES: "+numErrores;
	}
	
	if(numRespuestas==10){
		DetenerCrono();
		calcularPuntuacion();
		if (puntos<0){
			alert("Intentalo de nuevo");
			start();
		}else{
			subirNivel();
			IniciarCrono();
		}
	}
	resp="";
	document.getElementById('cadena').innerHTML = "RESPUESTA: "+resp;
	cambiarSubtitulos();
}

function subirNivel(){
	nivel++;
	tiempoTotal=minutos*60+segundos+numErrores*30;
	start();
}

function sumarLetra(value){
	resp+=value;
	document.getElementById('cadena').innerHTML = "RESPUESTA: "+resp;
}

function visualizarBotones(){
	switch (nivel){
	case 1:
		document.getElementById('aButton').style.visibility="visible";
		document.getElementById('bButton').style.visibility="visible";
		document.getElementById('cButton').style.visibility="visible";
		document.getElementById('dButton').style.visibility="visible";
		document.getElementById('eButton').style.visibility="visible";
		document.getElementById('fButton').style.visibility="visible";
		break;		
	case 2:
		document.getElementById('gButton').style.visibility="visible";
		document.getElementById('hButton').style.visibility="visible";
		document.getElementById('iButton').style.visibility="visible";
		document.getElementById('jButton').style.visibility="visible";
		document.getElementById('kButton').style.visibility="visible";
		document.getElementById('lButton').style.visibility="visible";
		document.getElementById('mButton').style.visibility="visible";
		document.getElementById('nButton').style.visibility="visible";
		document.getElementById('eneButton').style.visibility="visible";
		break;
	case 3:
		document.getElementById('oButton').style.visibility="visible";
		document.getElementById('pButton').style.visibility="visible";
		document.getElementById('qButton').style.visibility="visible";
		break;
		
	}
}
function calcularPuntuacion(){
	puntos=numAciertos*10-numErrores*20-segundos;
}

//Funciones para el uso del reloj

function DetenerCrono (){
   	if(CronoEjecutandose)
   		clearTimeout(CronoID)
   	CronoEjecutandose = false
}

function InicializarCrono () {
	//inicializa contadores globales
	decimas = 0
	segundos = 0
	minutos = 0
	
	//pone a cero los marcadores
	document.getElementById("time").innerHTML='00:00:0';
}

function MostrarCrono () {
	       
   	//incrementa el crono
   	decimas++
	if ( decimas > 9 ) {
		decimas = 0
		segundos++
		if ( segundos > 59 ) {
			segundos = 0
			minutos++
			if ( minutos > 99 ) {
				alert('Fin de la cuenta')
				DetenerCrono()
				return true
			}
		}
	}

	//configura la salida
	var ValorCrono = ""
	ValorCrono = (minutos < 10) ? "0" + minutos : minutos
	ValorCrono += (segundos < 10) ? ":0" + segundos : ":" + segundos
	
			
  	document.getElementById("time").innerHTML=ValorCrono;
  	CronoID = setTimeout("MostrarCrono()", 100)
	CronoEjecutandose = true
	return true
}

function IniciarCrono () {
 	DetenerCrono()
 	InicializarCrono()
	MostrarCrono()
}


